<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fisk.dataservice.mapper.ApiConfigureMapper">

    <select id="queryData" resultType="java.util.Map">
       SELECT
        <!--查询-->
        <if test="queryList!=null and queryList.size() >0" >
            <foreach collection="queryList" item="query" separator=",">
                ${query}
            </foreach>
        </if>

        <if test="queryList.size()>0 and (groupList.size() >0 or aggregationFieldList.size()>0)" >
            ,
        </if>

        <!--分组-->
       <if test="groupList!=null and groupList.size() >0" >
           <foreach collection="groupList" item="group" separator=",">
               ${group}
           </foreach>
       </if>

        <if test="groupList.size() >0 and aggregationFieldList.size()>0" >
          ,
        </if>

        <!--聚合-->
        <if test="aggregationFieldList!=null and aggregationFieldList.size() >0">
            <foreach collection="aggregationFieldList" item="aggreagation" separator=",">
                ${aggreagation}
            </foreach>
        </if>
      FROM ${tableName}
      <!--条件-->
      <where>
         <if test="whereList!=null and whereList.size() >0">
          <foreach collection="whereList" item="where" separator="AND">
              ${where}
          </foreach>
         </if>
      </where>

        <!--分组-->
      <if test="groupList!=null and groupList.size() >0">
      GROUP BY
          <foreach collection="groupList" item="group" separator=",">
              ${group}
          </foreach>
      </if>

      <!--如果查询条件中有聚合，那么查询的字段必须分组-->
      <if test="aggregationFieldList!=null and aggregationFieldList.size() >0">
        <if test="groupList.size() >0 and queryList.size()>0">
         ,
        </if>

        <if test="groupList==null or groupList.size() &lt;=0">
        GROUP BY
        </if>

        <foreach collection="queryList" item="query" separator=",">
            ${query}
        </foreach>
      </if>

      <!--如果没有聚合字段，但是要分组-->
      <if test="aggregationFieldList==null or aggregationFieldList.size() &lt;=0">
          <if test="groupList.size() >0 and queryList.size()>0">
              ,
          </if>

          <if test="groupList==null or groupList.size() &lt;=0">
              GROUP BY
          </if>

          <foreach collection="queryList" item="query" separator=",">
              ${query}
          </foreach>
      </if>
      limit #{currentPage},#{pageSize}
    </select>
</mapper>